@mixin innerColor( $color: $neutral ) {
    background-color: transparentize( $color , 0.05 );
    background-image: linear-gradient(
    90deg,
    transparentize( lighten( $color, 4% ), 1 ) 10%,
    transparentize( lighten( $color, 8% ), 0.2 ) 30%,
    transparentize( lighten( $color, 12% ), 0 ) 70%,
    transparentize( lighten( $color, 8% ), 0.2 ) 80%,
    transparentize( lighten( $color, 4% ), 1 ) 90%
    ),
    linear-gradient(
    to right,
    transparentize( lighten( $color, 12% ), 1 ) 0%,
    transparentize( lighten( $color, 12% ), 0 ) 100%
    ),
    linear-gradient(
    to left,
    transparentize( lighten( $color, 12% ), 1 ) 0%,
    transparentize( lighten( $color, 12% ), 0 ) 100%
    );
    border-color: lighten( $color, 20% );
}

.js-progress {
    @include rem('height', 30px);
    @include rem('padding', 0px 20px);
    @include rem('margin', 0px 0px 20px 0px);

    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.2);

    font-size: 1.2rem;

    &__text {
        @include rem('width', 320px);

        position: absolute;
        top: 5px;
        left: -30px;

        padding: 0 1rem;

        em {
            font-style: normal;
        }
    }

    &__bar {
        @include innerColor($danger);
        @include border-radius(3px);

        position: relative;
        top: -1px;
        left: -1px;

        display: block;
        opacity: 0;
        width: 0;
        height: 100%;
        background-repeat: no-repeat, no-repeat, no-repeat;
        background-position: -20% center, right center, left center;
        background-size: 6.25rem 1.875rem, 8.125rem 1.875rem, 130px 1.875rem;
        border: 1px solid;

        color: $white;
        font-size: $smaller;
        font-weight: normal;
        text-shadow: 0 1px 1px rgba(0,0,0,0.6);

        animation: pulse 2s ease-out infinite;
        transition: opacity 0.2s ease,
        width 0.8s ease-out,
        background-color 1s ease,
        border-color 0.3s ease,
        box-shadow 1s ease;

        &--active {
            opacity: 1;
        }

        &--part-1 {
            @include innerColor($notice);
        }

        &--part-2 {
            @include innerColor($warning);
        }

        &--part-3 {
            @include innerColor($success);
        }

        &--done {
            @include innerColor($neutral);
        }

        &:before,
        &:after {
            @include rem('top', -10px);
            @include rem('right', -1px);
            @include rem('width', 1px);
            @include rem('height', 40px);

            content: '';
            position: absolute;
        }

        &:before {
            @include rem('right', -4px);
            @include rem('width', 7px);

            background: radial-gradient(
            ellipse at center,
            rgba(255,255,255,0.4) 0%,
            rgba(255,255,255,0) 75%
            );
        }

        &:after {
            background: linear-gradient(
            to bottom,
            rgba(255,255,255,0) 0%,
            rgba(255,255,255,0.3) 25%,
            rgba(255,255,255,0.3) 75%,
            rgba(255,255,255,0) 100%
            );
        }
    }

    &--complete {
        .progress__bar {
            border-radius: 2px;

            animation: none;

            &:after,
            &:before {
                opacity: 0;
            }
        }
    }
}

@keyframes pulse {
    0% {
        background-position: -50% center, right center, left center;
    }

    100% {
        background-position: 150% center, right center, left center;
    }
}
